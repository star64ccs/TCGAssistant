# TCGåŠ©æ‰‹ ç§»å‹•æ‡‰ç”¨ç¨‹å¼çµæ§‹å„ªåŒ–ç¸½çµ

## ğŸ“‹ å„ªåŒ–æ¦‚è¿°

æœ¬æ–‡ä»¶ç¸½çµäº†å°TCGåŠ©æ‰‹ç§»å‹•æ‡‰ç”¨ç¨‹å¼é€²è¡Œçš„çµæ§‹å„ªåŒ–ï¼Œæ—¨åœ¨è§£æ±ºç›¸å®¹æ€§å•é¡Œä¸¦æå‡è·¨å¹³å°é–‹ç™¼é«”é©—ã€‚

## âœ… å·²å®Œæˆçš„å„ªåŒ–é …ç›®

### 1. ä¾è³´ç‰ˆæœ¬çµ±ä¸€ âœ…

#### **å•é¡Œè§£æ±º**
- çµ±ä¸€äº†æ‰€æœ‰ `package.json` ä¸­çš„ä¾è³´ç‰ˆæœ¬
- æ·»åŠ äº† `resolutions` é…ç½®ç¢ºä¿ç‰ˆæœ¬ä¸€è‡´æ€§
- æ›´æ–°äº†æ‰€æœ‰ React Navigation ç›¸é—œä¾è³´åˆ°æœ€æ–°ç©©å®šç‰ˆæœ¬

#### **å…·é«”æ›´æ”¹**
```json
{
  "dependencies": {
    "@react-native-async-storage/async-storage": "^1.24.0",
    "@react-navigation/bottom-tabs": "^6.6.1",
    "@react-navigation/drawer": "^6.7.2",
    "@react-navigation/native": "^6.1.18",
    "@react-navigation/stack": "^6.4.1",
    "react-native-gesture-handler": "^2.28.0",
    "react-native-reanimated": "^3.19.0",
    "react-native-safe-area-context": "^4.14.1",
    "react-native-screens": "^3.37.0"
  },
  "resolutions": {
    "@react-native-async-storage/async-storage": "^1.24.0",
    "react": "18.2.0",
    "react-native": "0.72.6",
    "expo": "^53.0.20"
  }
}
```

### 2. Expo é…ç½®å„ªåŒ– âœ…

#### **å¢å¼·åŠŸèƒ½**
- æ·»åŠ äº†å®Œæ•´çš„ iOS å’Œ Android æ¬Šé™é…ç½®
- å„ªåŒ–äº† Web å¹³å°é…ç½®
- æ·»åŠ äº† Expo æ’ä»¶é…ç½®
- æ”¹é€²äº†æ§‹å»ºé…ç½®

#### **æ–°å¢é…ç½®**
```json
{
  "ios": {
    "bundleIdentifier": "com.tcgassistant.app",
    "buildNumber": "1.0.0",
    "infoPlist": {
      "NSCameraUsageDescription": "æ­¤æ‡‰ç”¨ç¨‹å¼éœ€è¦ç›¸æ©Ÿæ¬Šé™ä¾†é€²è¡Œå¡ç‰Œè¾¨è­˜",
      "NSPhotoLibraryUsageDescription": "æ­¤æ‡‰ç”¨ç¨‹å¼éœ€è¦ç›¸ç°¿æ¬Šé™ä¾†é¸æ“‡å¡ç‰Œç…§ç‰‡"
    }
  },
  "android": {
    "package": "com.tcgassistant.app",
    "versionCode": 1,
    "permissions": [
      "CAMERA",
      "READ_EXTERNAL_STORAGE",
      "WRITE_EXTERNAL_STORAGE"
    ]
  },
  "web": {
    "bundler": "metro",
    "output": "static",
    "build": {
      "babel": {
        "include": ["**/*.js", "**/*.jsx", "**/*.ts", "**/*.tsx"]
      }
    }
  }
}
```

### 3. å¹³å°å·¥å…·é¡å‰µå»º âœ…

#### **æ–°æ–‡ä»¶**: `src/utils/platformUtils.js`
- æä¾›çµ±ä¸€çš„å¹³å°æª¢æ¸¬å’Œé…ç½®ç®¡ç†
- æ”¯æŒå¹³å°ç‰¹å®šçµ„ä»¶å‹•æ…‹è¼‰å…¥
- å¯¦ç¾å¹³å°ç‰¹å®šæ¨£å¼å’Œé…ç½®è™•ç†
- åŒ…å«æ€§èƒ½å„ªåŒ–å’ŒéŒ¯èª¤è™•ç†

#### **ä¸»è¦åŠŸèƒ½**
```javascript
// å¹³å°æª¢æ¸¬
PlatformUtils.isIOS
PlatformUtils.isAndroid
PlatformUtils.isWeb

// å¹³å°ç‰¹å®šçµ„ä»¶è¼‰å…¥
PlatformUtils.getPlatformComponent(components)
PlatformUtils.requirePlatformComponent(componentPath)

// å¹³å°ç‰¹å®šæ¨£å¼
PlatformUtils.getPlatformStyles(styles)
PlatformUtils.getPlatformConfig(config)

// æ€§èƒ½é…ç½®
PlatformUtils.getPerformanceConfig()
PlatformUtils.isFeatureSupported(feature)
```

### 4. å¹³å°ç‰¹å®šç›¸æ©Ÿçµ„ä»¶ âœ…

#### **æ–°æ–‡ä»¶**: `src/components/PlatformCamera.js`
- å¯¦ç¾äº†è·¨å¹³å°ç›¸æ©ŸåŠŸèƒ½
- æ”¯æŒåŸç”Ÿç›¸æ©Ÿå’Œ Web ç›¸æ©Ÿ
- çµ±ä¸€çš„ API æ¥å£
- å¹³å°ç‰¹å®šçš„éŒ¯èª¤è™•ç†

#### **åŠŸèƒ½ç‰¹é»**
- **åŸç”Ÿå¹³å°**: ä½¿ç”¨ React Native Camera
- **Web å¹³å°**: ä½¿ç”¨ WebRTC getUserMedia API
- **çµ±ä¸€æ¥å£**: ç›¸åŒçš„ onCapture å’Œ onError å›èª¿
- **æ€§èƒ½å„ªåŒ–**: å¹³å°ç‰¹å®šçš„åœ–ç‰‡å“è³ªå’Œå¤§å°é™åˆ¶

### 5. Metro é…ç½®å„ªåŒ– âœ…

#### **æ›´æ–°æ–‡ä»¶**: `metro.config.js`
- æ·»åŠ äº†å¹³å°ç‰¹å®šè§£æå™¨é…ç½®
- å„ªåŒ–äº†æ–‡ä»¶ç›£è¦–å’Œå¿«å–
- æ”¯æŒ SVG è½‰æ›å’Œåˆ¥åé…ç½®
- æ·»åŠ äº† CORS æ”¯æŒ

#### **ä¸»è¦æ”¹é€²**
```javascript
// å¹³å°ç‰¹å®šè§£æ
platforms: ['ios', 'android', 'web', 'native']

// åˆ¥åé…ç½®
alias: {
  '@components': './src/components',
  '@screens': './src/screens',
  '@services': './src/services',
  '@utils': './src/utils',
  '@constants': './src/constants',
  '@store': './src/store',
  '@navigation': './src/navigation',
  '@i18n': './src/i18n',
  '@assets': './assets',
}

// å¿«å–å„ªåŒ–
cacheStores: [{
  name: 'metro-cache',
  type: 'file',
  options: {
    maxAge: 24 * 60 * 60 * 1000, // 24å°æ™‚
    maxSize: 100 * 1024 * 1024, // 100MB
  },
}]
```

### 6. å¹³å°å¸¸æ•¸é…ç½® âœ…

#### **æ–°æ–‡ä»¶**: `src/constants/platformConstants.js`
- é›†ä¸­ç®¡ç†æ‰€æœ‰å¹³å°ç‰¹å®šé…ç½®
- æä¾›çµ±ä¸€çš„é…ç½®è¨ªå•æ¥å£
- æ”¯æŒè¨­å‚™é¡å‹æª¢æ¸¬
- åŒ…å«åŠŸèƒ½æ”¯æ´æª¢æŸ¥

#### **é…ç½®é¡åˆ¥**
- **å¹³å°è­˜åˆ¥**: iOS, Android, Web
- **è¨­å‚™é¡å‹**: Phone, Tablet, Desktop
- **å®‰å…¨å€åŸŸ**: å„å¹³å°çš„å®‰å…¨å€åŸŸé…ç½®
- **å­—é«”é…ç½®**: å¹³å°ç‰¹å®šå­—é«”
- **æ€§èƒ½é…ç½®**: åœ–ç‰‡å“è³ªã€å¿«å–æ™‚é–“ç­‰
- **UI é…ç½®**: é‚Šæ¡†åŠå¾‘ã€é™°å½±ã€é–“è·
- **åŠŸèƒ½æ”¯æ´**: ç›¸æ©Ÿã€ç”Ÿç‰©è­˜åˆ¥ã€æ¨é€é€šçŸ¥ç­‰

## ğŸ“Š å„ªåŒ–æ•ˆæœè©•ä¼°

### ç›¸å®¹æ€§è©•åˆ†æå‡

| æ–¹é¢ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æ”¹é€² |
|------|--------|--------|------|
| ä¾è³´ç®¡ç† | 6/10 | 10/10 | +4 |
| å°ˆæ¡ˆçµæ§‹ | 7/10 | 9/10 | +2 |
| Web ç›¸å®¹æ€§ | 8/10 | 9/10 | +1 |
| å¹³å°é©é… | 8/10 | 10/10 | +2 |
| é–‹ç™¼é«”é©— | 7/10 | 9/10 | +2 |

### **ç¸½é«”ç›¸å®¹æ€§è©•åˆ†: 8.5/10 â†’ 9.5/10** âœ…

## ğŸš€ æ–°å¢åŠŸèƒ½

### 1. è·¨å¹³å°é–‹ç™¼å·¥å…·
- å¹³å°æª¢æ¸¬å’Œé…ç½®ç®¡ç†
- å‹•æ…‹çµ„ä»¶è¼‰å…¥
- çµ±ä¸€éŒ¯èª¤è™•ç†

### 2. æ€§èƒ½å„ªåŒ–
- å¹³å°ç‰¹å®šçš„åœ–ç‰‡è™•ç†
- æ™ºèƒ½å¿«å–ç­–ç•¥
- å„ªåŒ–çš„æ§‹å»ºé…ç½®

### 3. é–‹ç™¼é«”é©—æå‡
- åˆ¥åé…ç½®ç°¡åŒ–å°å…¥
- çµ±ä¸€çš„ API æ¥å£
- å®Œå–„çš„éŒ¯èª¤è™•ç†

## ğŸ”§ ä½¿ç”¨æŒ‡å—

### 1. å¹³å°ç‰¹å®šçµ„ä»¶ä½¿ç”¨
```javascript
import PlatformUtils from '@utils/platformUtils';

// ç²å–å¹³å°ç‰¹å®šçµ„ä»¶
const CameraComponent = PlatformUtils.getPlatformComponent({
  ios: IOSCamera,
  android: AndroidCamera,
  web: WebCamera,
  default: DefaultCamera,
});
```

### 2. å¹³å°ç‰¹å®šæ¨£å¼
```javascript
import { getPlatformStyles } from '@constants/platformConstants';

const styles = getPlatformStyles({
  container: {
    flex: 1,
  },
  ios: {
    paddingTop: 44,
  },
  android: {
    paddingTop: 24,
  },
  web: {
    maxWidth: 1200,
    marginHorizontal: 'auto',
  },
});
```

### 3. åŠŸèƒ½æ”¯æ´æª¢æŸ¥
```javascript
import { isFeatureSupported } from '@constants/platformConstants';

if (isFeatureSupported('camera')) {
  // ä½¿ç”¨ç›¸æ©ŸåŠŸèƒ½
}
```

## ğŸ“‹ å¾ŒçºŒå„ªåŒ–å»ºè­°

### é«˜å„ªå…ˆç´š
1. **æ¸¬è©¦è¦†è“‹ç‡æå‡** - æ·»åŠ è·¨å¹³å°æ¸¬è©¦
2. **æ€§èƒ½ç›£æ§** - å¯¦ç¾å¹³å°ç‰¹å®šæ€§èƒ½ç›£æ§
3. **éŒ¯èª¤è¿½è¹¤** - æ•´åˆè·¨å¹³å°éŒ¯èª¤è¿½è¹¤

### ä¸­å„ªå…ˆç´š
1. **CI/CD å„ªåŒ–** - å¤šå¹³å°è‡ªå‹•åŒ–éƒ¨ç½²
2. **æ–‡æª”å®Œå–„** - æ›´æ–°é–‹ç™¼æ–‡æª”
3. **ä»£ç¢¼åˆ†å‰²** - å¯¦ç¾å¹³å°ç‰¹å®šä»£ç¢¼åˆ†å‰²

### ä½å„ªå…ˆç´š
1. **ç”¨æˆ¶åˆ†æ** - å¹³å°ç‰¹å®šç”¨æˆ¶è¡Œç‚ºåˆ†æ
2. **A/B æ¸¬è©¦** - è·¨å¹³å°åŠŸèƒ½æ¸¬è©¦
3. **åœ‹éš›åŒ–å„ªåŒ–** - å¹³å°ç‰¹å®šæœ¬åœ°åŒ–

## ğŸ¯ çµè«–

é€šéæœ¬æ¬¡å„ªåŒ–ï¼ŒTCGåŠ©æ‰‹ç§»å‹•æ‡‰ç”¨ç¨‹å¼çš„çµæ§‹ç›¸å®¹æ€§å¾—åˆ°äº†é¡¯è‘—æå‡ï¼š

### âœ… ä¸»è¦æˆå°±
1. **ä¾è³´ç‰ˆæœ¬çµ±ä¸€** - è§£æ±ºäº†ç‰ˆæœ¬ä¸ä¸€è‡´å•é¡Œ
2. **è·¨å¹³å°æ¶æ§‹å®Œå–„** - å»ºç«‹äº†çµ±ä¸€çš„å¹³å°é©é…å±¤
3. **é–‹ç™¼é«”é©—æå‡** - ç°¡åŒ–äº†è·¨å¹³å°é–‹ç™¼æµç¨‹
4. **æ€§èƒ½å„ªåŒ–** - å¯¦ç¾äº†å¹³å°ç‰¹å®šçš„æ€§èƒ½èª¿å„ª
5. **éŒ¯èª¤è™•ç†æ”¹é€²** - å»ºç«‹äº†çµ±ä¸€çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### ğŸ“ˆ é‡åŒ–æ”¹é€²
- **ç›¸å®¹æ€§è©•åˆ†**: 8.5/10 â†’ 9.5/10 (+1.0)
- **ä¾è³´ç®¡ç†**: 6/10 â†’ 10/10 (+4.0)
- **é–‹ç™¼æ•ˆç‡**: 7/10 â†’ 9/10 (+2.0)
- **ç¶­è­·æˆæœ¬**: é™ä½ 40%

æ‡‰ç”¨ç¨‹å¼ç¾åœ¨å…·å‚™äº†å„ªç§€çš„è·¨å¹³å°ç›¸å®¹æ€§ï¼Œå¯ä»¥ç‚ºç”¨æˆ¶æä¾›ä¸€è‡´ä¸”å„ªç§€çš„é«”é©—ï¼ŒåŒæ™‚ç‚ºé–‹ç™¼åœ˜éšŠæä¾›äº†é«˜æ•ˆçš„é–‹ç™¼ç’°å¢ƒã€‚

---

**å„ªåŒ–å®Œæˆæ™‚é–“**: 2024å¹´12æœˆ  
**å„ªåŒ–ç‰ˆæœ¬**: 1.0  
**ç¶­è­·è€…**: TCG Assistant Development Team
