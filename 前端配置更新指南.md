# 前端配置更新指南

## 📋 部署完成後的前端配置更新

當您的後端成功部署到Render後，需要更新前端配置以連接新的後端服務。

## 🔧 步驟1：獲取Render服務URL

部署完成後，您會獲得一個URL，例如：
```
https://tcg-assistant-backend.onrender.com
```

請記下這個URL，接下來會用到。

## 🔄 步驟2：更新API配置

### 2.1 更新統一配置文件

編輯 `src/config/unifiedConfig.js`：

```javascript
// 將原來的配置
const API_BASE_URL = 'http://localhost:3000';

// 更新為
const API_BASE_URL = process.env.NODE_ENV === 'production'
  ? 'https://your-service-name.onrender.com'  // 替換為您的Render URL
  : 'http://localhost:3000';
```

### 2.2 更新環境變數

編輯根目錄的 `.env` 文件：

```bash
# 將原來的配置
REACT_APP_API_URL=http://localhost:3000

# 更新為
REACT_APP_API_URL=https://your-service-name.onrender.com
```

### 2.3 更新測試組件

編輯 `src/examples/FrontendBackendConnectionTest.js`：

```javascript
// 將所有的 fetch 調用從
const response = await fetch('http://localhost:3000/health');

// 更新為
const response = await fetch('https://your-service-name.onrender.com/health');
```

## 🧪 步驟3：測試連接

### 3.1 使用測試組件

在您的React Native應用中：

```javascript
import FrontendBackendConnectionTest from './src/examples/FrontendBackendConnectionTest';

// 在您的導航或主組件中使用
<FrontendBackendConnectionTest />
```

### 3.2 手動測試

在瀏覽器中訪問以下端點：

```
https://your-service-name.onrender.com/health
https://your-service-name.onrender.com/api/v1
https://your-service-name.onrender.com/api/v1/user/profile
```

## 🔍 步驟4：驗證配置

### 4.1 檢查API調用

打開瀏覽器開發者工具，查看Network標籤：

1. 啟動您的前端應用
2. 執行API調用
3. 檢查請求是否發送到正確的URL
4. 確認響應狀態為200

### 4.2 檢查控制台日誌

查看瀏覽器控制台是否有錯誤信息：

```javascript
// 應該看到類似這樣的日誌
API請求: GET https://your-service-name.onrender.com/health
API響應: 200 OK
```

## 🚀 步驟5：重新啟動前端

### 5.1 停止當前服務

```bash
# 如果使用 npm
Ctrl + C

# 如果使用 expo
Ctrl + C
```

### 5.2 清除緩存

```bash
# 清除 npm 緩存
npm cache clean --force

# 清除 expo 緩存
expo r -c
```

### 5.3 重新啟動

```bash
# 使用 npm
npm start

# 使用 expo
expo start
```

## ✅ 步驟6：最終驗證

### 6.1 功能測試

測試以下功能是否正常：

- [ ] 用戶資料獲取
- [ ] 卡牌資料查詢
- [ ] 文件上傳
- [ ] 認證功能

### 6.2 性能測試

- [ ] 響應時間是否合理
- [ ] 是否有超時錯誤
- [ ] 緩存是否正常工作

## 🔍 常見問題解決

### 問題1：CORS錯誤

**症狀：** 瀏覽器控制台顯示CORS錯誤

**解決方案：**
1. 確認Render服務的CORS_ORIGIN環境變數設置為 `*`
2. 檢查前端請求的Origin是否在允許列表中
3. 確認使用HTTPS協議

### 問題2：連接超時

**症狀：** 請求超時或無法連接

**解決方案：**
1. 確認Render服務URL正確
2. 檢查網絡連接
3. 等待服務喚醒（免費服務可能休眠）

### 問題3：環境變數未生效

**症狀：** 前端仍使用舊的API URL

**解決方案：**
1. 重新啟動前端服務
2. 清除瀏覽器緩存
3. 檢查環境變數文件格式

### 問題4：HTTPS證書問題

**症狀：** 混合內容警告或證書錯誤

**解決方案：**
1. 確保所有請求都使用HTTPS
2. 更新前端配置中的協議
3. 檢查Render服務的SSL設置

## 📊 監控和維護

### 1. 性能監控

定期檢查：
- API響應時間
- 錯誤率
- 服務可用性

### 2. 日誌監控

在Render控制台查看：
- 服務日誌
- 錯誤信息
- 性能指標

### 3. 定期更新

- 定期更新依賴
- 檢查安全更新
- 優化代碼

## 🎯 配置檢查清單

- [ ] 獲取Render服務URL
- [ ] 更新統一配置文件
- [ ] 更新環境變數
- [ ] 更新測試組件
- [ ] 測試API連接
- [ ] 驗證所有功能
- [ ] 檢查性能
- [ ] 更新文檔

## 📞 需要幫助？

如果遇到問題：

1. 檢查Render服務狀態
2. 查看瀏覽器控制台錯誤
3. 確認網絡連接
4. 查看Render日誌
5. 參考詳細部署教學

---

**恭喜！您的前端已成功連接到Render後端服務！** 🎉

現在您可以享受穩定的前後端連接和更好的開發體驗。
